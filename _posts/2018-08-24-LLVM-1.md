---
layout  : page
title   : "LLVM #1"
date       : 2018-08-24
author      : "pshung"
---


# Register a RISCV target and a TargetMachine to use llvm target-independent code generator.
Use class **TargetRegistry** to register a target, TargetMachine and a list of MC components.

In subdirectory TargetInfo, RISCVTargetInfo.cpp
```c++
Target &llvm::getTheRISCVTarget() {
  static Target RISCVTarget;
  return RISCVTarget;
}

extern "C" void LLVMInitializeRISCVTargetInfo() {
  RegisterTarget<Triple::riscv64> X(getTheRISCVTarget(), "RISCV64",
                                    "RISCV 64-bit", "RISCV");
}

```
In RISCVTargetMachine.cpp
```c++
extern "C" void LLVMInitializeRISCVTarget() {
  RegisterTargetMachine<RISCVTargetMachine> X(getTheRISCVTarget());
}

```

# Lowering LLVM IR to SelectionDAG.

